import json
import unittest

from rs.machine.handlers.default_choose import DefaultChooseHandler
from rs.machine.handlers.default_play import DefaultPlayHandler
from rs.machine.state import GameState

STATE = '{"available_commands":["play","end","key","click","wait","state"],"ready_for_command":true,"in_game":true,"game_state":{"screen_type":"NONE","screen_state":{},"seed":1394488993359253936,"combat_state":{"draw_pile":[{"exhausts":false,"is_playable":true,"cost":1,"name":"Strike","id":"Strike_R","type":"ATTACK","ethereal":false,"uuid":"b137f1cf-cd00-484f-a5b2-1e33da56144a","upgrades":0,"rarity":"BASIC","has_target":true},{"exhausts":false,"is_playable":true,"cost":1,"name":"Strike","id":"Strike_R","type":"ATTACK","ethereal":false,"uuid":"31187295-f57a-4038-b754-347e3fe58096","upgrades":0,"rarity":"BASIC","has_target":true},{"exhausts":false,"is_playable":true,"cost":1,"name":"Defend","id":"Defend_R","type":"SKILL","ethereal":false,"uuid":"44f1ea78-1da4-4a5f-b360-b552fb58f566","upgrades":0,"rarity":"BASIC","has_target":false},{"exhausts":false,"is_playable":true,"cost":1,"name":"Strike","id":"Strike_R","type":"ATTACK","ethereal":false,"uuid":"cf31cb4a-f761-48fe-980f-6cae536f9194","upgrades":0,"rarity":"BASIC","has_target":true}],"discard_pile":[],"exhaust_pile":[],"cards_discarded_this_turn":0,"times_damaged":0,"monsters":[{"is_gone":false,"move_hits":1,"move_base_damage":11,"half_dead":false,"move_adjusted_damage":-1,"max_hp":42,"intent":"DEBUG","move_id":1,"name":"Jaw Worm","current_hp":42,"block":0,"id":"JawWorm","powers":[]}],"turn":1,"limbo":[],"hand":[{"exhausts":false,"is_playable":true,"cost":1,"name":"Defend","id":"Defend_R","type":"SKILL","ethereal":false,"uuid":"3550754d-b76a-43ba-9e7e-9aa2f8ead7f1","upgrades":0,"rarity":"BASIC","has_target":false},{"exhausts":false,"is_playable":true,"cost":1,"name":"Defend","id":"Defend_R","type":"SKILL","ethereal":false,"uuid":"f81af346-9c8f-4395-ac97-5ee95aacd586","upgrades":0,"rarity":"BASIC","has_target":false},{"exhausts":false,"is_playable":true,"cost":1,"name":"Defend","id":"Defend_R","type":"SKILL","ethereal":false,"uuid":"7efac1bc-b807-442a-838e-f48f0990c731","upgrades":0,"rarity":"BASIC","has_target":false},{"exhausts":false,"is_playable":true,"cost":2,"name":"Bash","id":"Bash","type":"ATTACK","ethereal":false,"uuid":"75abd82c-8b30-4d8d-8c23-2d93eb3ad8ee","upgrades":0,"rarity":"BASIC","has_target":true},{"exhausts":false,"is_playable":true,"cost":1,"name":"Strike","id":"Strike_R","type":"ATTACK","ethereal":false,"uuid":"23e57693-ee1c-4b98-ae73-36bc0e96b573","upgrades":0,"rarity":"BASIC","has_target":true}],"player":{"orbs":[],"current_hp":80,"block":0,"max_hp":80,"powers":[],"energy":3}},"deck":[{"exhausts":false,"is_playable":true,"cost":1,"name":"Strike","id":"Strike_R","type":"ATTACK","ethereal":false,"uuid":"b137f1cf-cd00-484f-a5b2-1e33da56144a","upgrades":0,"rarity":"BASIC","has_target":true},{"exhausts":false,"is_playable":true,"cost":1,"name":"Strike","id":"Strike_R","type":"ATTACK","ethereal":false,"uuid":"23e57693-ee1c-4b98-ae73-36bc0e96b573","upgrades":0,"rarity":"BASIC","has_target":true},{"exhausts":false,"is_playable":true,"cost":1,"name":"Strike","id":"Strike_R","type":"ATTACK","ethereal":false,"uuid":"31187295-f57a-4038-b754-347e3fe58096","upgrades":0,"rarity":"BASIC","has_target":true},{"exhausts":false,"is_playable":true,"cost":1,"name":"Strike","id":"Strike_R","type":"ATTACK","ethereal":false,"uuid":"cf31cb4a-f761-48fe-980f-6cae536f9194","upgrades":0,"rarity":"BASIC","has_target":true},{"exhausts":false,"is_playable":true,"cost":1,"name":"Defend","id":"Defend_R","type":"SKILL","ethereal":false,"uuid":"7efac1bc-b807-442a-838e-f48f0990c731","upgrades":0,"rarity":"BASIC","has_target":false},{"exhausts":false,"is_playable":true,"cost":1,"name":"Defend","id":"Defend_R","type":"SKILL","ethereal":false,"uuid":"3550754d-b76a-43ba-9e7e-9aa2f8ead7f1","upgrades":0,"rarity":"BASIC","has_target":false},{"exhausts":false,"is_playable":true,"cost":1,"name":"Defend","id":"Defend_R","type":"SKILL","ethereal":false,"uuid":"44f1ea78-1da4-4a5f-b360-b552fb58f566","upgrades":0,"rarity":"BASIC","has_target":false},{"exhausts":false,"is_playable":true,"cost":1,"name":"Defend","id":"Defend_R","type":"SKILL","ethereal":false,"uuid":"f81af346-9c8f-4395-ac97-5ee95aacd586","upgrades":0,"rarity":"BASIC","has_target":false},{"exhausts":false,"is_playable":true,"cost":2,"name":"Bash","id":"Bash","type":"ATTACK","ethereal":false,"uuid":"75abd82c-8b30-4d8d-8c23-2d93eb3ad8ee","upgrades":0,"rarity":"BASIC","has_target":true}],"relics":[{"name":"Burning Blood","id":"Burning Blood","counter":-1}],"max_hp":80,"act_boss":"Slime Boss","gold":99,"action_phase":"WAITING_ON_USER","act":1,"screen_name":"NONE","room_phase":"COMBAT","is_screen_up":false,"potions":[{"requires_target":false,"can_use":false,"can_discard":false,"name":"Potion Slot","id":"Potion Slot"},{"requires_target":false,"can_use":false,"can_discard":false,"name":"Potion Slot","id":"Potion Slot"},{"requires_target":false,"can_use":false,"can_discard":false,"name":"Potion Slot","id":"Potion Slot"}],"current_hp":80,"floor":1,"ascension_level":0,"class":"IRONCLAD","map":[{"symbol":"M","children":[{"x":1,"y":1}],"x":1,"y":0,"parents":[]},{"symbol":"M","children":[{"x":3,"y":1}],"x":3,"y":0,"parents":[]},{"symbol":"M","children":[{"x":4,"y":1}],"x":4,"y":0,"parents":[]},{"symbol":"M","children":[{"x":6,"y":1}],"x":5,"y":0,"parents":[]},{"symbol":"?","children":[{"x":0,"y":2}],"x":1,"y":1,"parents":[]},{"symbol":"M","children":[{"x":4,"y":2}],"x":3,"y":1,"parents":[]},{"symbol":"M","children":[{"x":4,"y":2}],"x":4,"y":1,"parents":[]},{"symbol":"M","children":[{"x":5,"y":2}],"x":6,"y":1,"parents":[]},{"symbol":"M","children":[{"x":0,"y":3}],"x":0,"y":2,"parents":[]},{"symbol":"$","children":[{"x":3,"y":3},{"x":5,"y":3}],"x":4,"y":2,"parents":[]},{"symbol":"M","children":[{"x":5,"y":3},{"x":6,"y":3}],"x":5,"y":2,"parents":[]},{"symbol":"M","children":[{"x":1,"y":4}],"x":0,"y":3,"parents":[]},{"symbol":"M","children":[{"x":2,"y":4}],"x":3,"y":3,"parents":[]},{"symbol":"?","children":[{"x":4,"y":4}],"x":5,"y":3,"parents":[]},{"symbol":"M","children":[{"x":6,"y":4}],"x":6,"y":3,"parents":[]},{"symbol":"M","children":[{"x":1,"y":5}],"x":1,"y":4,"parents":[]},{"symbol":"M","children":[{"x":3,"y":5}],"x":2,"y":4,"parents":[]},{"symbol":"M","children":[{"x":4,"y":5},{"x":5,"y":5}],"x":4,"y":4,"parents":[]},{"symbol":"M","children":[{"x":5,"y":5}],"x":6,"y":4,"parents":[]},{"symbol":"R","children":[{"x":1,"y":6}],"x":1,"y":5,"parents":[]},{"symbol":"M","children":[{"x":2,"y":6},{"x":4,"y":6}],"x":3,"y":5,"parents":[]},{"symbol":"$","children":[{"x":4,"y":6}],"x":4,"y":5,"parents":[]},{"symbol":"M","children":[{"x":4,"y":6},{"x":5,"y":6}],"x":5,"y":5,"parents":[]},{"symbol":"?","children":[{"x":2,"y":7}],"x":1,"y":6,"parents":[]},{"symbol":"?","children":[{"x":2,"y":7}],"x":2,"y":6,"parents":[]},{"symbol":"M","children":[{"x":3,"y":7},{"x":4,"y":7}],"x":4,"y":6,"parents":[]},{"symbol":"$","children":[{"x":5,"y":7}],"x":5,"y":6,"parents":[]},{"symbol":"E","children":[{"x":1,"y":8},{"x":3,"y":8}],"x":2,"y":7,"parents":[]},{"symbol":"E","children":[{"x":4,"y":8}],"x":3,"y":7,"parents":[]},{"symbol":"M","children":[{"x":5,"y":8}],"x":4,"y":7,"parents":[]},{"symbol":"E","children":[{"x":5,"y":8}],"x":5,"y":7,"parents":[]},{"symbol":"T","children":[{"x":1,"y":9}],"x":1,"y":8,"parents":[]},{"symbol":"T","children":[{"x":2,"y":9}],"x":3,"y":8,"parents":[]},{"symbol":"T","children":[{"x":4,"y":9}],"x":4,"y":8,"parents":[]},{"symbol":"T","children":[{"x":5,"y":9},{"x":6,"y":9}],"x":5,"y":8,"parents":[]},{"symbol":"R","children":[{"x":2,"y":10}],"x":1,"y":9,"parents":[]},{"symbol":"E","children":[{"x":3,"y":10}],"x":2,"y":9,"parents":[]},{"symbol":"?","children":[{"x":4,"y":10}],"x":4,"y":9,"parents":[]},{"symbol":"R","children":[{"x":4,"y":10}],"x":5,"y":9,"parents":[]},{"symbol":"M","children":[{"x":5,"y":10}],"x":6,"y":9,"parents":[]},{"symbol":"M","children":[{"x":1,"y":11}],"x":2,"y":10,"parents":[]},{"symbol":"R","children":[{"x":3,"y":11}],"x":3,"y":10,"parents":[]},{"symbol":"?","children":[{"x":3,"y":11}],"x":4,"y":10,"parents":[]},{"symbol":"R","children":[{"x":5,"y":11}],"x":5,"y":10,"parents":[]},{"symbol":"M","children":[{"x":2,"y":12}],"x":1,"y":11,"parents":[]},{"symbol":"M","children":[{"x":2,"y":12},{"x":3,"y":12}],"x":3,"y":11,"parents":[]},{"symbol":"?","children":[{"x":6,"y":12}],"x":5,"y":11,"parents":[]},{"symbol":"R","children":[{"x":1,"y":13},{"x":2,"y":13}],"x":2,"y":12,"parents":[]},{"symbol":"?","children":[{"x":4,"y":13}],"x":3,"y":12,"parents":[]},{"symbol":"R","children":[{"x":5,"y":13},{"x":6,"y":13}],"x":6,"y":12,"parents":[]},{"symbol":"?","children":[{"x":0,"y":14}],"x":1,"y":13,"parents":[]},{"symbol":"M","children":[{"x":2,"y":14}],"x":2,"y":13,"parents":[]},{"symbol":"?","children":[{"x":4,"y":14}],"x":4,"y":13,"parents":[]},{"symbol":"?","children":[{"x":5,"y":14}],"x":5,"y":13,"parents":[]},{"symbol":"M","children":[{"x":6,"y":14}],"x":6,"y":13,"parents":[]},{"symbol":"R","children":[{"x":3,"y":16}],"x":0,"y":14,"parents":[]},{"symbol":"R","children":[{"x":3,"y":16}],"x":2,"y":14,"parents":[]},{"symbol":"R","children":[{"x":3,"y":16}],"x":4,"y":14,"parents":[]},{"symbol":"R","children":[{"x":3,"y":16}],"x":5,"y":14,"parents":[]},{"symbol":"R","children":[{"x":3,"y":16}],"x":6,"y":14,"parents":[]}],"room_type":"MonsterRoom"}}'


class PlayHandlerTestCase(unittest.TestCase):
    def test_something(self):
        handler = DefaultPlayHandler()
        state = GameState(json.loads(STATE))

        self.assertEqual("play 1", handler.handle(state))  # add assertion here


if __name__ == '__main__':
    unittest.main()
